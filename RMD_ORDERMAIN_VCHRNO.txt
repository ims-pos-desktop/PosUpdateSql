CREATE OR ALTER VIEW [dbo].[RMD_TRNMAIN]
AS
SELECT  VCHRNO, DIVISION, CHALANNO, TRNDATE, BSDATE, TRNTIME, TOTAMNT, DCAMNT, DCRATE, VATAMNT, NETAMNT, ADVANCE, TRNMODE, BILLTO, BILLTOADD, TRNUSER, VATBILL, DELIVERYDATE, 
        DELIVERYTIME, ORDERS, REFORDBILL, INDDIS, CREBATE, CREDIT, DUEDATE, TRNAC, PARAC, PARTRNAMNT, RETTO, REFBILL, CHEQUENO, CHEQUEDATE, REMARKS, POST, POSTUSER, FPOSTUSER, 
        TERMINAL, SHIFT, EXPORT, CHOLDER, CARDNO, EditUser, MEMBERNO, MEMBERNAME, EDITED, TAXABLE, NONTAXABLE, VMODE, BILLTOTEL, BILLTOMOB, TRN_DATE, BS_DATE, STAX, TOTALCASH, 
        TOTALCREDIT, TOTALCREDITCARD, TOTALGIFTVOUCHER, TENDER, CHANGE, CardTranID, ReturnVchrID, TranID, VoucherStatus, VoucherType, PRESCRIBEBY, DISPENSEBY, RECEIVEBY, Edate, STATUS, 
        CONFIRMEDBY, CONFIRMEDTIME, PhiscalID, Stamp, ROUNDOFF, Customer_Count, DBUSER, HOSTID, VNUM, TOTALREBATE, DISVALUE, STAXVALUE, COSTCENTER, TOTALFLATDISCOUNT, TOTALINDDISCOUNT, 
        TOTALLOYALTY, TOTALPROMOTION, NETWITHOUTROUNDOFF, guid, JOBNO, MWAREHOUSE, POSTID
FROM    dbo.ABBMAIN							
						 
UNION ALL
SELECT  VCHRNO, DIVISION, CHALANNO, TRNDATE, BSDATE, TRNTIME, TOTAMNT, DCAMNT, DCRATE, VATAMNT, NETAMNT, ADVANCE, TRNMODE, BILLTO, BILLTOADD, TRNUSER, VATBILL, DELIVERYDATE, 
        DELIVERYTIME, ORDERS, REFORDBILL, INDDIS, CREBATE, CREDIT, DUEDATE, TRNAC, PARAC, PARTRNAMNT, RETTO, REFBILL, CHEQUENO, CHEQUEDATE, REMARKS, POST, POSTUSER, FPOSTUSER, 
        TERMINAL, SHIFT, EXPORT, CHOLDER, CARDNO, EditUser, MEMBERNO, MEMBERNAME, EDITED, TAXABLE, NONTAXABLE, VMODE, BILLTOTEL, BILLTOMOB, TRN_DATE, BS_DATE, STAX, TOTALCASH, 
        TOTALCREDIT, TOTALCREDITCARD, TOTALGIFTVOUCHER, TENDER, CHANGE, CardTranID, ReturnVchrID, TranID, VoucherStatus, VoucherType, PRESCRIBEBY, DISPENSEBY, RECEIVEBY, Edate, STATUS, 
        CONFIRMEDBY, CONFIRMEDTIME, PhiscalID, Stamp, ROUNDOFF, Customer_Count, DBUSER, HOSTID, VNUM, TOTALREBATE, DISVALUE, STAXVALUE, COSTCENTER, TOTALFLATDISCOUNT, TOTALINDDISCOUNT, 
        TOTALLOYALTY, TOTALPROMOTION, NETWITHOUTROUNDOFF, guid, JOBNO, MWAREHOUSE, POSTID
FROM    dbo.TRNMAIN   

UNION ALL
SELECT  VCHRNO, DIVISION, CHALANNO, TRNDATE, BSDATE, TRNTIME, TOTAMNT, DCAMNT, DCRATE, VATAMNT, NETAMNT, ADVANCE, TRNMODE, BILLTO, BILLTOADD, TRNUSER, VATBILL, DELIVERYDATE, 
        DELIVERYTIME, ORDERS, REFORDBILL, INDDIS, CREBATE, CREDIT, DUEDATE, TRNAC, PARAC, PARTRNAMNT, RETTO, REFBILL, CHEQUENO, CHEQUEDATE, REMARKS, POST, POSTUSER, FPOSTUSER, 
        TERMINAL, SHIFT, EXPORT, CHOLDER, CARDNO, EditUser, MEMBERNO, MEMBERNAME, EDITED, TAXABLE, NONTAXABLE, VMODE, BILLTOTEL, BILLTOMOB, TRN_DATE, BS_DATE, STAX, TOTALCASH, 
        TOTALCREDIT, TOTALCREDITCARD, TOTALGIFTVOUCHER, TENDER, CHANGE, CardTranID, ReturnVchrID, TranID, VoucherStatus, VoucherType, PRESCRIBEBY, DISPENSEBY, RECEIVEBY, Edate, STATUS, 
        CONFIRMEDBY, CONFIRMEDTIME, PhiscalID, Stamp, ROUNDOFF, Customer_Count, DBUSER, HOSTID, VNUM, TOTALREBATE, DISVALUE, STAXVALUE, COSTCENTER, TOTALFLATDISCOUNT, TOTALINDDISCOUNT, 
        TOTALLOYALTY, TOTALPROMOTION, NETWITHOUTROUNDOFF, guid, JOBNO, MWAREHOUSE, POSTID
FROM    dbo.ACCMAIN

UNION ALL
SELECT  VCHRNO, DIVISION, CHALANNO, TRNDATE, BSDATE, TRNTIME, TOTAMNT, DCAMNT, DCRATE, VATAMNT, NETAMNT, ADVANCE, TRNMODE, BILLTO, BILLTOADD, TRNUSER, VATBILL, DELIVERYDATE, 
        DELIVERYTIME, ORDERS, REFORDBILL, INDDIS, CREBATE, CREDIT, DUEDATE, TRNAC, PARAC, PARTRNAMNT, RETTO, REFBILL, CHEQUENO, CHEQUEDATE, REMARKS, POST, POSTUSER, FPOSTUSER, 
        TERMINAL, SHIFT, EXPORT, CHOLDER, CARDNO, EditUser, MEMBERNO, MEMBERNAME, EDITED, TAXABLE, NONTAXABLE, VMODE, BILLTOTEL, BILLTOMOB, TRN_DATE, BS_DATE, STAX, TOTALCASH, 
        TOTALCREDIT, TOTALCREDITCARD, TOTALGIFTVOUCHER, TENDER, CHANGE, CardTranID, ReturnVchrID, TranID, VoucherStatus, VoucherType, PRESCRIBEBY, DISPENSEBY, RECEIVEBY, Edate, STATUS, 
        CONFIRMEDBY, CONFIRMEDTIME, PhiscalID, Stamp, ROUNDOFF, Customer_Count, DBUSER, HOSTID, VNUM, TOTALREBATE, DISVALUE, STAXVALUE, COSTCENTER, TOTALFLATDISCOUNT, TOTALINDDISCOUNT, 
        TOTALLOYALTY, TOTALPROMOTION, NETWITHOUTROUNDOFF, guid, JOBNO, MWAREHOUSE, POSTID
FROM    dbo.INVMAIN

UNION ALL
SELECT  VCHRNO, DIVISION, CHALANNO, TRNDATE, BSDATE, TRNTIME, TOTAMNT, DCAMNT, DCRATE, VATAMNT, NETAMNT, ADVANCE, TRNMODE, BILLTO, BILLTOADD, TRNUSER, VATBILL, DELIVERYDATE, 
        DELIVERYTIME, ORDERS, REFORDBILL, INDDIS, CREBATE, CREDIT, DUEDATE, TRNAC, PARAC, PARTRNAMNT, RETTO, REFBILL, CHEQUENO, CHEQUEDATE, REMARKS, POST, POSTUSER, FPOSTUSER, 
        TERMINAL, SHIFT, EXPORT, CHOLDER, CARDNO, EditUser, MEMBERNO, MEMBERNAME, EDITED, TAXABLE, NONTAXABLE, VMODE, BILLTOTEL, BILLTOMOB, TRN_DATE, BS_DATE, STAX, TOTALCASH, 
        TOTALCREDIT, TOTALCREDITCARD, TOTALGIFTVOUCHER, TENDER, CHANGE, CardTranID, ReturnVchrID, TranID, VoucherStatus, VoucherType, PRESCRIBEBY, DISPENSEBY, RECEIVEBY, Edate, STATUS, 
        CONFIRMEDBY, CONFIRMEDTIME, PhiscalID, Stamp, ROUNDOFF, Customer_Count, DBUSER, HOSTID, VNUM, TOTALREBATE, DISVALUE, STAXVALUE, COSTCENTER, TOTALFLATDISCOUNT, TOTALINDDISCOUNT, 
        TOTALLOYALTY, TOTALPROMOTION, NETWITHOUTROUNDOFF, guid, JOBNO, MWAREHOUSE, POSTID
FROM    dbo.PURMAIN
                          
UNION ALL
SELECT  VCHRNO, DIVISION, CHALANNO, TRNDATE, BSDATE, TRNTIME, TOTAMNT, DCAMNT, DCRATE, VATAMNT, NETAMNT, ADVANCE, TRNMODE, BILLTO, BILLTOADD, TRNUSER, VATBILL, DELIVERYDATE, 
        DELIVERYTIME, ORDERS, REFORDBILL, INDDIS, CREBATE, CREDIT, DUEDATE, TRNAC, PARAC, PARTRNAMNT, RETTO, REFBILL, CHEQUENO, CHEQUEDATE, REMARKS, POST, POSTUSER, FPOSTUSER, 
        TERMINAL, SHIFT, EXPORT, CHOLDER, CARDNO, EditUser, MEMBERNO, MEMBERNAME, EDITED, TAXABLE, NONTAXABLE, VMODE, BILLTOTEL, BILLTOMOB, TRN_DATE, BS_DATE, STAX, TOTALCASH, 
        TOTALCREDIT, TOTALCREDITCARD, TOTALGIFTVOUCHER, TENDER, CHANGE, CardTranID, ReturnVchrID, TranID, VoucherStatus, VoucherType, PRESCRIBEBY, DISPENSEBY, RECEIVEBY, Edate, STATUS, 
        CONFIRMEDBY, CONFIRMEDTIME, PhiscalID, Stamp, ROUNDOFF, Customer_Count, DBUSER, HOSTID, VNUM, TOTALREBATE, DISVALUE, STAXVALUE, COSTCENTER, TOTALFLATDISCOUNT, TOTALINDDISCOUNT, 
        TOTALLOYALTY, TOTALPROMOTION, NETWITHOUTROUNDOFF, guid, JOBNO, MWAREHOUSE, POSTID						  
FROM    dbo.AOPMAIN

UNION ALL
SELECT  VCHRNO, DIVISION, CHALANNO, TRNDATE, BSDATE, TRNTIME, TOTAMNT, DCAMNT, DCRATE, VATAMNT, NETAMNT, ADVANCE, TRNMODE, BILLTO, BILLTOADD, TRNUSER, VATBILL, DELIVERYDATE, 
        DELIVERYTIME, ORDERS, REFORDBILL, INDDIS, CREBATE, CREDIT, DUEDATE, TRNAC, PARAC, PARTRNAMNT, RETTO, REFBILL, CHEQUENO, CHEQUEDATE, REMARKS, POST, POSTUSER, FPOSTUSER, 
        TERMINAL, SHIFT, EXPORT, CHOLDER, CARDNO, EditUser, MEMBERNO, MEMBERNAME, EDITED, TAXABLE, NONTAXABLE, VMODE, BILLTOTEL, BILLTOMOB, TRN_DATE, BS_DATE, STAX, TOTALCASH, 
        TOTALCREDIT, TOTALCREDITCARD, TOTALGIFTVOUCHER, TENDER, CHANGE, CardTranID, ReturnVchrID, TranID, VoucherStatus, VoucherType, PRESCRIBEBY, DISPENSEBY, RECEIVEBY, Edate, STATUS, 
        CONFIRMEDBY, CONFIRMEDTIME, PhiscalID, Stamp, ROUNDOFF, Customer_Count, DBUSER, HOSTID, VNUM, TOTALREBATE, DISVALUE, STAXVALUE, COSTCENTER, TOTALFLATDISCOUNT, TOTALINDDISCOUNT, 
        TOTALLOYALTY, TOTALPROMOTION, NETWITHOUTROUNDOFF, guid, JOBNO, MWAREHOUSE, POSTID						  
FROM    dbo.OPMAIN
GO


IF EXISTS (SELECT * FROM INFORMATION_SCHEMA.COLUMNS WHERE TABLE_NAME = 'RMD_ACLIST' AND COLUMN_NAME= 'ACNAME' AND CHARACTER_MAXIMUM_LENGTH <> 100)
ALTER TABLE RMD_ACLIST ALTER COLUMN ACNAME VARCHAR(100) NOT NULL


IF EXISTS (SELECT * FROM INFORMATION_SCHEMA.COLUMNS WHERE TABLE_NAME = 'RMD_ACLIST' AND COLUMN_NAME= 'ADDRESS' AND CHARACTER_MAXIMUM_LENGTH <> 100)
ALTER TABLE RMD_ACLIST ALTER COLUMN ADDRESS VARCHAR(100) 


IF EXISTS (SELECT * FROM INFORMATION_SCHEMA.COLUMNS WHERE TABLE_NAME = 'TRNMAIN' AND COLUMN_NAME= 'BILLTOADD' AND CHARACTER_MAXIMUM_LENGTH <> 100)
ALTER TABLE TRNMAIN ALTER COLUMN BILLTOADD VARCHAR(100) 


IF EXISTS (SELECT * FROM INFORMATION_SCHEMA.COLUMNS WHERE TABLE_NAME = 'ABBMAIN' AND COLUMN_NAME= 'BILLTOADD' AND CHARACTER_MAXIMUM_LENGTH <> 100)
ALTER TABLE ABBMAIN ALTER COLUMN BILLTOADD VARCHAR(100) 


IF EXISTS (SELECT * FROM INFORMATION_SCHEMA.COLUMNS WHERE TABLE_NAME = 'ACCMAIN' AND COLUMN_NAME= 'BILLTOADD' AND CHARACTER_MAXIMUM_LENGTH <> 100)
ALTER TABLE ACCMAIN ALTER COLUMN BILLTOADD VARCHAR(100) 


IF EXISTS (SELECT * FROM INFORMATION_SCHEMA.COLUMNS WHERE TABLE_NAME = 'INVMAIN' AND COLUMN_NAME= 'BILLTOADD' AND CHARACTER_MAXIMUM_LENGTH <> 100)
ALTER TABLE ACCMAIN ALTER COLUMN BILLTOADD VARCHAR(100) 


IF EXISTS (SELECT * FROM INFORMATION_SCHEMA.COLUMNS WHERE TABLE_NAME = 'AOPMAIN' AND COLUMN_NAME= 'BILLTOADD' AND CHARACTER_MAXIMUM_LENGTH <> 100)
ALTER TABLE AOPMAIN ALTER COLUMN BILLTOADD VARCHAR(100) 


IF EXISTS (SELECT * FROM INFORMATION_SCHEMA.COLUMNS WHERE TABLE_NAME = 'OPMAIN' AND COLUMN_NAME= 'BILLTOADD' AND CHARACTER_MAXIMUM_LENGTH <> 100)
ALTER TABLE OPMAIN ALTER COLUMN BILLTOADD VARCHAR(100) 


IF EXISTS (SELECT * FROM INFORMATION_SCHEMA.COLUMNS WHERE TABLE_NAME = 'PURMAIN' AND COLUMN_NAME= 'BILLTOADD' AND CHARACTER_MAXIMUM_LENGTH <> 100)
ALTER TABLE PURMAIN ALTER COLUMN BILLTOADD VARCHAR(100) 

;GO

CREATE OR ALTER VIEW [dbo].[RMD_TRNMAIN] WITH SCHEMABINDING
AS
SELECT  VCHRNO, DIVISION, CHALANNO, TRNDATE, BSDATE, TRNTIME, TOTAMNT, DCAMNT, DCRATE, VATAMNT, NETAMNT, ADVANCE, TRNMODE, BILLTO, BILLTOADD, TRNUSER, VATBILL, DELIVERYDATE, 
        DELIVERYTIME, ORDERS, REFORDBILL, INDDIS, CREBATE, CREDIT, DUEDATE, TRNAC, PARAC, PARTRNAMNT, RETTO, REFBILL, CHEQUENO, CHEQUEDATE, REMARKS, POST, POSTUSER, FPOSTUSER, 
        TERMINAL, SHIFT, EXPORT, CHOLDER, CARDNO, EditUser, MEMBERNO, MEMBERNAME, EDITED, TAXABLE, NONTAXABLE, VMODE, BILLTOTEL, BILLTOMOB, TRN_DATE, BS_DATE, STAX, TOTALCASH, 
        TOTALCREDIT, TOTALCREDITCARD, TOTALGIFTVOUCHER, TENDER, CHANGE, CardTranID, ReturnVchrID, TranID, VoucherStatus, VoucherType, PRESCRIBEBY, DISPENSEBY, RECEIVEBY, Edate, STATUS, 
        CONFIRMEDBY, CONFIRMEDTIME, PhiscalID, Stamp, ROUNDOFF, Customer_Count, DBUSER, HOSTID, VNUM, TOTALREBATE, DISVALUE, STAXVALUE, COSTCENTER, TOTALFLATDISCOUNT, TOTALINDDISCOUNT, 
        TOTALLOYALTY, TOTALPROMOTION, NETWITHOUTROUNDOFF, guid, JOBNO, MWAREHOUSE, POSTID
FROM    dbo.ABBMAIN							
						 
UNION ALL
SELECT  VCHRNO, DIVISION, CHALANNO, TRNDATE, BSDATE, TRNTIME, TOTAMNT, DCAMNT, DCRATE, VATAMNT, NETAMNT, ADVANCE, TRNMODE, BILLTO, BILLTOADD, TRNUSER, VATBILL, DELIVERYDATE, 
        DELIVERYTIME, ORDERS, REFORDBILL, INDDIS, CREBATE, CREDIT, DUEDATE, TRNAC, PARAC, PARTRNAMNT, RETTO, REFBILL, CHEQUENO, CHEQUEDATE, REMARKS, POST, POSTUSER, FPOSTUSER, 
        TERMINAL, SHIFT, EXPORT, CHOLDER, CARDNO, EditUser, MEMBERNO, MEMBERNAME, EDITED, TAXABLE, NONTAXABLE, VMODE, BILLTOTEL, BILLTOMOB, TRN_DATE, BS_DATE, STAX, TOTALCASH, 
        TOTALCREDIT, TOTALCREDITCARD, TOTALGIFTVOUCHER, TENDER, CHANGE, CardTranID, ReturnVchrID, TranID, VoucherStatus, VoucherType, PRESCRIBEBY, DISPENSEBY, RECEIVEBY, Edate, STATUS, 
        CONFIRMEDBY, CONFIRMEDTIME, PhiscalID, Stamp, ROUNDOFF, Customer_Count, DBUSER, HOSTID, VNUM, TOTALREBATE, DISVALUE, STAXVALUE, COSTCENTER, TOTALFLATDISCOUNT, TOTALINDDISCOUNT, 
        TOTALLOYALTY, TOTALPROMOTION, NETWITHOUTROUNDOFF, guid, JOBNO, MWAREHOUSE, POSTID
FROM    dbo.TRNMAIN   

UNION ALL
SELECT  VCHRNO, DIVISION, CHALANNO, TRNDATE, BSDATE, TRNTIME, TOTAMNT, DCAMNT, DCRATE, VATAMNT, NETAMNT, ADVANCE, TRNMODE, BILLTO, BILLTOADD, TRNUSER, VATBILL, DELIVERYDATE, 
        DELIVERYTIME, ORDERS, REFORDBILL, INDDIS, CREBATE, CREDIT, DUEDATE, TRNAC, PARAC, PARTRNAMNT, RETTO, REFBILL, CHEQUENO, CHEQUEDATE, REMARKS, POST, POSTUSER, FPOSTUSER, 
        TERMINAL, SHIFT, EXPORT, CHOLDER, CARDNO, EditUser, MEMBERNO, MEMBERNAME, EDITED, TAXABLE, NONTAXABLE, VMODE, BILLTOTEL, BILLTOMOB, TRN_DATE, BS_DATE, STAX, TOTALCASH, 
        TOTALCREDIT, TOTALCREDITCARD, TOTALGIFTVOUCHER, TENDER, CHANGE, CardTranID, ReturnVchrID, TranID, VoucherStatus, VoucherType, PRESCRIBEBY, DISPENSEBY, RECEIVEBY, Edate, STATUS, 
        CONFIRMEDBY, CONFIRMEDTIME, PhiscalID, Stamp, ROUNDOFF, Customer_Count, DBUSER, HOSTID, VNUM, TOTALREBATE, DISVALUE, STAXVALUE, COSTCENTER, TOTALFLATDISCOUNT, TOTALINDDISCOUNT, 
        TOTALLOYALTY, TOTALPROMOTION, NETWITHOUTROUNDOFF, guid, JOBNO, MWAREHOUSE, POSTID
FROM    dbo.ACCMAIN

UNION ALL
SELECT  VCHRNO, DIVISION, CHALANNO, TRNDATE, BSDATE, TRNTIME, TOTAMNT, DCAMNT, DCRATE, VATAMNT, NETAMNT, ADVANCE, TRNMODE, BILLTO, BILLTOADD, TRNUSER, VATBILL, DELIVERYDATE, 
        DELIVERYTIME, ORDERS, REFORDBILL, INDDIS, CREBATE, CREDIT, DUEDATE, TRNAC, PARAC, PARTRNAMNT, RETTO, REFBILL, CHEQUENO, CHEQUEDATE, REMARKS, POST, POSTUSER, FPOSTUSER, 
        TERMINAL, SHIFT, EXPORT, CHOLDER, CARDNO, EditUser, MEMBERNO, MEMBERNAME, EDITED, TAXABLE, NONTAXABLE, VMODE, BILLTOTEL, BILLTOMOB, TRN_DATE, BS_DATE, STAX, TOTALCASH, 
        TOTALCREDIT, TOTALCREDITCARD, TOTALGIFTVOUCHER, TENDER, CHANGE, CardTranID, ReturnVchrID, TranID, VoucherStatus, VoucherType, PRESCRIBEBY, DISPENSEBY, RECEIVEBY, Edate, STATUS, 
        CONFIRMEDBY, CONFIRMEDTIME, PhiscalID, Stamp, ROUNDOFF, Customer_Count, DBUSER, HOSTID, VNUM, TOTALREBATE, DISVALUE, STAXVALUE, COSTCENTER, TOTALFLATDISCOUNT, TOTALINDDISCOUNT, 
        TOTALLOYALTY, TOTALPROMOTION, NETWITHOUTROUNDOFF, guid, JOBNO, MWAREHOUSE, POSTID
FROM    dbo.INVMAIN

UNION ALL
SELECT  VCHRNO, DIVISION, CHALANNO, TRNDATE, BSDATE, TRNTIME, TOTAMNT, DCAMNT, DCRATE, VATAMNT, NETAMNT, ADVANCE, TRNMODE, BILLTO, BILLTOADD, TRNUSER, VATBILL, DELIVERYDATE, 
        DELIVERYTIME, ORDERS, REFORDBILL, INDDIS, CREBATE, CREDIT, DUEDATE, TRNAC, PARAC, PARTRNAMNT, RETTO, REFBILL, CHEQUENO, CHEQUEDATE, REMARKS, POST, POSTUSER, FPOSTUSER, 
        TERMINAL, SHIFT, EXPORT, CHOLDER, CARDNO, EditUser, MEMBERNO, MEMBERNAME, EDITED, TAXABLE, NONTAXABLE, VMODE, BILLTOTEL, BILLTOMOB, TRN_DATE, BS_DATE, STAX, TOTALCASH, 
        TOTALCREDIT, TOTALCREDITCARD, TOTALGIFTVOUCHER, TENDER, CHANGE, CardTranID, ReturnVchrID, TranID, VoucherStatus, VoucherType, PRESCRIBEBY, DISPENSEBY, RECEIVEBY, Edate, STATUS, 
        CONFIRMEDBY, CONFIRMEDTIME, PhiscalID, Stamp, ROUNDOFF, Customer_Count, DBUSER, HOSTID, VNUM, TOTALREBATE, DISVALUE, STAXVALUE, COSTCENTER, TOTALFLATDISCOUNT, TOTALINDDISCOUNT, 
        TOTALLOYALTY, TOTALPROMOTION, NETWITHOUTROUNDOFF, guid, JOBNO, MWAREHOUSE, POSTID
FROM    dbo.PURMAIN
                          
UNION ALL
SELECT  VCHRNO, DIVISION, CHALANNO, TRNDATE, BSDATE, TRNTIME, TOTAMNT, DCAMNT, DCRATE, VATAMNT, NETAMNT, ADVANCE, TRNMODE, BILLTO, BILLTOADD, TRNUSER, VATBILL, DELIVERYDATE, 
        DELIVERYTIME, ORDERS, REFORDBILL, INDDIS, CREBATE, CREDIT, DUEDATE, TRNAC, PARAC, PARTRNAMNT, RETTO, REFBILL, CHEQUENO, CHEQUEDATE, REMARKS, POST, POSTUSER, FPOSTUSER, 
        TERMINAL, SHIFT, EXPORT, CHOLDER, CARDNO, EditUser, MEMBERNO, MEMBERNAME, EDITED, TAXABLE, NONTAXABLE, VMODE, BILLTOTEL, BILLTOMOB, TRN_DATE, BS_DATE, STAX, TOTALCASH, 
        TOTALCREDIT, TOTALCREDITCARD, TOTALGIFTVOUCHER, TENDER, CHANGE, CardTranID, ReturnVchrID, TranID, VoucherStatus, VoucherType, PRESCRIBEBY, DISPENSEBY, RECEIVEBY, Edate, STATUS, 
        CONFIRMEDBY, CONFIRMEDTIME, PhiscalID, Stamp, ROUNDOFF, Customer_Count, DBUSER, HOSTID, VNUM, TOTALREBATE, DISVALUE, STAXVALUE, COSTCENTER, TOTALFLATDISCOUNT, TOTALINDDISCOUNT, 
        TOTALLOYALTY, TOTALPROMOTION, NETWITHOUTROUNDOFF, guid, JOBNO, MWAREHOUSE, POSTID						  
FROM    dbo.AOPMAIN

UNION ALL
SELECT  VCHRNO, DIVISION, CHALANNO, TRNDATE, BSDATE, TRNTIME, TOTAMNT, DCAMNT, DCRATE, VATAMNT, NETAMNT, ADVANCE, TRNMODE, BILLTO, BILLTOADD, TRNUSER, VATBILL, DELIVERYDATE, 
        DELIVERYTIME, ORDERS, REFORDBILL, INDDIS, CREBATE, CREDIT, DUEDATE, TRNAC, PARAC, PARTRNAMNT, RETTO, REFBILL, CHEQUENO, CHEQUEDATE, REMARKS, POST, POSTUSER, FPOSTUSER, 
        TERMINAL, SHIFT, EXPORT, CHOLDER, CARDNO, EditUser, MEMBERNO, MEMBERNAME, EDITED, TAXABLE, NONTAXABLE, VMODE, BILLTOTEL, BILLTOMOB, TRN_DATE, BS_DATE, STAX, TOTALCASH, 
        TOTALCREDIT, TOTALCREDITCARD, TOTALGIFTVOUCHER, TENDER, CHANGE, CardTranID, ReturnVchrID, TranID, VoucherStatus, VoucherType, PRESCRIBEBY, DISPENSEBY, RECEIVEBY, Edate, STATUS, 
        CONFIRMEDBY, CONFIRMEDTIME, PhiscalID, Stamp, ROUNDOFF, Customer_Count, DBUSER, HOSTID, VNUM, TOTALREBATE, DISVALUE, STAXVALUE, COSTCENTER, TOTALFLATDISCOUNT, TOTALINDDISCOUNT, 
        TOTALLOYALTY, TOTALPROMOTION, NETWITHOUTROUNDOFF, guid, JOBNO, MWAREHOUSE, POSTID						  
FROM    dbo.OPMAIN
GO;


IF EXISTS (SELECT * FROM INFORMATION_SCHEMA.COLUMNS WHERE TABLE_NAME = 'RMD_ORDERMAIN' AND COLUMN_NAME= 'VCHRNO' AND CHARACTER_MAXIMUM_LENGTH = 15)
BEGIN 
ALTER TABLE RMD_ORDERPROD DROP CONSTRAINT FK_RMD_ORDERPROD_RMD_ORDERMAIN
ALTER TABLE RMD_ORDERMAIN DROP CONSTRAINT PK_RMD_ORDERMAIN
ALTER TABLE RMD_ORDERMAIN ALTER COLUMN VCHRNO VARCHAR(25) NOT NULL
ALTER TABLE RMD_ORDERMAIN ALTER COLUMN PhiscalID VARCHAR(20) NOT NULL
ALTER TABLE RMD_ORDERPROD ALTER COLUMN VCHRNO VARCHAR(25) NOT NULL
ALTER TABLE RMD_ORDERPROD ALTER COLUMN PhiscalID VARCHAR(20) NOT NULL
ALTER TABLE RMD_ORDERMAIN ADD CONSTRAINT PK_RMD_ORDERMAIN PRIMARY KEY(VCHRNO, DIVISION, PhiscalID)
ALTER TABLE RMD_ORDERPROD ADD CONSTRAINT FK_RMD_ORDERPROD_RMD_ORDERMAIN FOREIGN KEY (VCHRNO, DIVISION, PhiscalID) REFERENCES RMD_ORDERMAIN(VCHRNO, DIVISION, PhiscalID)
END





