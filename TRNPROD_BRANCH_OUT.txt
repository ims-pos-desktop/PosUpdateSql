CREATE OR ALTER VIEW TRNPROD_BRANCH_OUT
AS
SELECT VCHRNO, CHALANNO, DIVISION, MCODE, UNIT, Quantity, RealQty, AltQty, RATE, AMOUNT, DISCOUNT, VAT, REALRATE, EXPORT
, IDIS, OPQTY, REALQTY_IN, ALTQTY_IN, WAREHOUSE, REFBILLQTY, SPRICE, EXPDATE, REFOPBILL, ALTUNIT, TRNAC, PRATE, VRATE, ALTRATE
, VPRATE, VSRATE, TAXABLE, NONTAXABLE, INVRATE, EXRATE, NCRATE, CRATE, SNO, [CUSTOM], [WEIGHT], DRATE, CARTON, INVOICENO, ISSUENO
, BC, GENERIC, BATCH, MFGDATE, MANUFACTURER, SERVICETAX, SALESMANID, PhiscalID, STAMP  FROM RMD_TRNPRODS WHERE LEFT(VCHRNO, 2) = 'TO' 
AND (SELECT CentralizedDbMode FROM SETTING) = 0
UNION ALL
SELECT VCHRNO, CHALANNO, DIVISION, MCODE, UNIT, Quantity, RealQty, AltQty, RATE, AMOUNT, DISCOUNT, VAT, REALRATE, EXPORT
, IDIS, OPQTY, REALQTY_IN, ALTQTY_IN, WAREHOUSE, REFBILLQTY, SPRICE, EXPDATE, REFOPBILL, ALTUNIT, TRNAC, PRATE, VRATE, ALTRATE
, VPRATE, VSRATE, TAXABLE, NONTAXABLE, INVRATE, EXRATE, NCRATE, CRATE, SNO, [CUSTOM], [WEIGHT], DRATE, CARTON, INVOICENO, ISSUENO
, BC, GENERIC, BATCH, MFGDATE, MANUFACTURER, SERVICETAX, SALESMANID, PhiscalID, STAMP  FROM INVPROD WHERE LEFT(VCHRNO, 2) = 'TO' AND ADDTIONALROW = 0