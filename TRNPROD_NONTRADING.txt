IF NOT EXISTS(SELECT * FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_NAME = 'TRNPROD_NONTRADING')
CREATE TABLE [dbo].[TRNPROD_NONTRADING](
	[VCHRNO] [varchar](25) NOT NULL,
	[CHALANNO] [varchar](50) NULL,
	[DIVISION] [char](3) NOT NULL,
	[MCODE] [varchar](25) NULL,
	[UNIT] [varchar](20) NULL,
	[Quantity] [numeric](18, 3) NULL CONSTRAINT [DF_TRNPROD_NONTRADING_Quantity]  DEFAULT (0),
	[RealQty] [numeric](18, 3) NULL CONSTRAINT [DF_TRNPROD_NONTRADING_RealQty]  DEFAULT (0),
	[AltQty] [numeric](18, 3) NULL CONSTRAINT [DF_RMD_TRNPROD_NONTRADING_AltQty]  DEFAULT (0),
	[RATE] [decimal](20, 12) NULL CONSTRAINT [DF_TRNPROD_NONTRADING_RATE]  DEFAULT (0),
	[AMOUNT] [numeric](20, 12) NULL CONSTRAINT [DF_RMD_TRNPROD_NONTRADING_AMOUNT]  DEFAULT (0),
	[DISCOUNT] [numeric](20, 12) NULL CONSTRAINT [DF_RMD_TRNPROD_NONTRADING_DISCOUNT]  DEFAULT (0),
	[VAT] [numeric](20, 12) NULL CONSTRAINT [DF_RMD_TRNPROD_NONTRADING_VAT]  DEFAULT (0),
	[REALRATE] [decimal](20, 12) NULL CONSTRAINT [DF_TRNPROD_NONTRADING_REALRATE]  DEFAULT (0),
	[IDIS] [varchar](100) NULL,
	[REALQTY_IN] [numeric](18, 3) NULL CONSTRAINT [DF_RMD_TRNPROD_NONTRADING_REALQTY_IN]  DEFAULT (0),
	[ALTQTY_IN] [numeric](18, 3) NULL CONSTRAINT [DF_RMD_TRNPROD_NONTRADING_ALTQTY_IN]  DEFAULT (0),
	[WAREHOUSE] [varchar](50) NULL,
	[REFBILLQTY] [numeric](18, 3) NULL CONSTRAINT [DF_RMD_TRNPROD_NONTRADING_REFBILLQTY]  DEFAULT (0),
	[EXPDATE] [datetime] NULL,
	[ALTUNIT] [varchar](15) NULL,
	[TRNAC] [varchar](25) NULL,
	[PRATE] [numeric](18, 2) NULL CONSTRAINT [DF_RMD_TRNPROD_NONTRADING_PRATE]  DEFAULT (0),
	[ALTRATE] [decimal](20, 12) NULL CONSTRAINT [DF_TRNPROD_NONTRADING_ALTRATE]  DEFAULT (0),
	[VPRATE] [numeric](15, 2) NULL CONSTRAINT [DF_RMD_TRNPROD_NONTRADING_VPRATE]  DEFAULT (0),
	[TAXABLE] [numeric](20, 12) NULL CONSTRAINT [DF_RMD_TRNPROD_NONTRADING_TAXABLE]  DEFAULT (0),
	[NONTAXABLE] [numeric](20, 12) NULL CONSTRAINT [DF_RMD_TRNPROD_NONTRADING_NONTAXABLE]  DEFAULT (0),
	[CRATE] [numeric](18, 6) NULL CONSTRAINT [DF_RMD_TRNPROD_NONTRADING_CRATE]  DEFAULT (0),
	[SNO] [int] NULL CONSTRAINT [DF_RMD_TRNPROD_NONTRADING_SNO]  DEFAULT (0),
	[INVOICENO] [varchar](50) NULL,
	[BC] [varchar](50) NULL,
	[BATCH] [varchar](50) NULL,
	[MFGDATE] [datetime] NULL,
	[MANUFACTURER] [varchar](100) NULL,
	[SERVICETAX] [numeric](20, 12) NULL,
	[VoucherType] [varchar](2) NOT NULL,
	[PhiscalID] [varchar](20) NULL CONSTRAINT [DF_RMD_TRNPROD_NONTRADING_PHISCALID]  DEFAULT ([dbo].[GetPhiscalID]()),
	[STAMP] [float] NULL CONSTRAINT [DF_RMD_TRNPROD_NONTRADING_STAMP]  DEFAULT (CONVERT([float],getdate(),(0))),
	[ITEMDESC] [varchar](200) NULL,
	[NETAMOUNT] [numeric](18, 8) NULL,
	[COSTCENTER] [varchar](100) NULL,
	[ISVAT] [tinyint] NULL,
	[DNID] [numeric](18, 0) NULL CONSTRAINT [DF_RMD_TRNPROD_NONTRADING_DNID]  DEFAULT (0),
	[ITEMTYPE] [varchar](20) NULL,
	[REMARKS] [varchar](255) NULL,
	[INDDISCOUNTRATE] [float] NULL,
	[COMPANYID] [varchar](25) NOT NULL CONSTRAINT [DF_TRNPROD_NONTRADING_COMPANYID]  DEFAULT ([dbo].[GetCompanyId]())
	CONSTRAINT [FK_RMD_TRNPROD_NONTRADING_MENUITEM] FOREIGN KEY([MCODE]) REFERENCES [dbo].[MENUITEM] ([MCODE]),
	CONSTRAINT [FK_RMD_TRNPROD_NONTRADING_RMD_WAREHOUSE] FOREIGN KEY([WAREHOUSE]) REFERENCES [dbo].[RMD_WAREHOUSE] ([NAME]),
	CONSTRAINT [FK_TRNPROD_NONTRADING_PURMAIN] FOREIGN KEY([VCHRNO], [VoucherType]) REFERENCES [dbo].[PURMAIN] ([VCHRNO], [VoucherType]),
	CONSTRAINT [CHECK_TRNPROD_NONTRADING] CHECK  (([VOUCHERTYPE]='PR' OR [VOUCHERTYPE]='DN' OR [VOUCHERTYPE]='PI' OR [VOUCHERTYPE]='PX' OR [VOUCHERTYPE]='DX')),
	CONSTRAINT [CHK_TRNPROD_NONTRADING_ITEMTYPE] CHECK  (([ITEMTYPE]='1' OR [ITEMTYPE]='2'))
) ON [PRIMARY]