IF NOT EXISTS (SELECT * FROM INFORMATION_SCHEMA.COLUMNS WHERE TABLE_NAME = 'SETTING' AND COLUMN_NAME = 'AppBuildNo')
ALTER TABLE SETTING ADD AppBuildNo VARCHAR(500) 

IF NOT EXISTS(SELECT * FROM INFORMATION_SCHEMA.COLUMNS WHERE TABLE_NAME = 'RMD_BILLTENDER' AND COLUMN_NAME = 'SALESMANID')
ALTER TABLE RMD_BILLTENDER ADD SALESMANID INT

IF NOT EXISTS (SELECT * FROM INFORMATION_SCHEMA.TABLE_CONSTRAINTS WHERE CONSTRAINT_NAME = 'FK_MENUITEM_SUPCODE')
BEGIN
	UPDATE A SET SUPCODE = NULL FROM MENUITEM A LEFT JOIN RMD_ACLIST B ON A.SUPCODE = B.ACID
	WHERE B.ACID IS NULL
	ALTER TABLE MENUITEM ADD CONSTRAINT FK_MENUITEM_SUPCODE FOREIGN KEY (SUPCODE) REFERENCES RMD_ACLIST(ACID)
END

IF EXISTS(SELECT * FROM INFORMATION_SCHEMA.TABLE_CONSTRAINTS WHERE CONSTRAINT_NAME = 'FK_RCF_ReportMaster')
ALTER TABLE ReportColumnFormat DROP CONSTRAINT FK_RCF_ReportMaster

IF NOT EXISTS (SELECT * FROM INFORMATION_SCHEMA.COLUMNS WHERE TABLE_NAME = 'RMD_TRNPROD_STATUS' AND COLUMN_NAME = 'SalesMan')
ALTER TABLE RMD_TRNPROD_STATUS ADD SalesMan VARCHAR(200) NOT NULL, CONSTRAINT DF_RMD_TRNPROD_STATUS_SALESMAN DEFAULT ('') FOR SalesMan

IF NOT EXISTS (SELECT * FROM INFORMATION_SCHEMA.COLUMNS WHERE TABLE_NAME = 'SETTING' AND COLUMN_NAME = 'AllowMultiSalesManTag')
ALTER TABLE SETTING ADD AllowMultiSalesManTag TINYINT


IF NOT EXISTS (SELECT * FROM INFORMATION_SCHEMA.COLUMNS WHERE TABLE_NAME = 'SETTING' AND COLUMN_NAME = 'EnableIndItemSalesManTag')
ALTER TABLE SETTING ADD EnableIndItemSalesManTag TINYINT

IF NOT EXISTS (SELECT * FROM INFORMATION_SCHEMA.COLUMNS WHERE TABLE_NAME = 'CustomerProfile' AND COLUMN_NAME = 'EMAIL')
ALTER TABLE CustomerProfile ADD EMAIL VARCHAR(200)

IF NOT EXISTS (SELECT * FROM INFORMATION_SCHEMA.COLUMNS WHERE TABLE_NAME = 'RMD_TRNPROD_STATUS' AND COLUMN_NAME = 'StartTime')
ALTER TABLE RMD_TRNPROD_STATUS ADD StartTime VARCHAR(10)
IF NOT EXISTS (SELECT * FROM INFORMATION_SCHEMA.COLUMNS WHERE TABLE_NAME = 'RMD_TRNPROD_STATUS' AND COLUMN_NAME = 'EndTime')
ALTER TABLE RMD_TRNPROD_STATUS ADD EndTime VARCHAR(10)
IF NOT EXISTS (SELECT * FROM INFORMATION_SCHEMA.COLUMNS WHERE TABLE_NAME = 'RMD_TRNPROD_STATUS' AND COLUMN_NAME = 'SNO')
ALTER TABLE RMD_TRNPROD_STATUS ADD SNO INT

IF NOT EXISTS (SELECT * FROM INFORMATION_SCHEMA.COLUMNS WHERE TABLE_NAME = 'SETTING' AND COLUMN_NAME = 'AllowMultiWarehouseInTransaction')
ALTER TABLE SETTING ADD AllowMultiWarehouseInTransaction TINYINT

IF NOT EXISTS (SELECT * FROM INFORMATION_SCHEMA.COLUMNS WHERE TABLE_NAME = 'SETTING' AND COLUMN_NAME = 'BackendOnlineBilling')
ALTER TABLE SETTING ADD BackendOnlineBilling TINYINT

IF NOT EXISTS (SELECT * FROM INFORMATION_SCHEMA.COLUMNS WHERE TABLE_NAME = 'SETTING' AND COLUMN_NAME = 'EnableDiscountPreset')
ALTER TABLE SETTING ADD EnableDiscountPreset TINYINT


IF NOT EXISTS (SELECT * FROM INFORMATION_SCHEMA.COLUMNS WHERE TABLE_NAME = 'RMD_ORDERMAIN' AND COLUMN_NAME = 'REFNO')
ALTER TABLE RMD_ORDERMAIN ADD REFNO VARCHAR(25)

IF NOT EXISTS (SELECT * FROM INFORMATION_SCHEMA.COLUMNS WHERE TABLE_NAME = 'RMD_ORDERMAIN' AND COLUMN_NAME = 'GUID')
ALTER TABLE RMD_ORDERMAIN ADD GUID VARCHAR(50)

IF NOT EXISTS (SELECT * FROM INFORMATION_SCHEMA.COLUMNS WHERE TABLE_NAME = 'CustomerProfile' AND COLUMN_NAME ='Age')
ALTER TABLE CustomerProfile ADD Age TINYINT

IF NOT EXISTS (SELECT * FROM INFORMATION_SCHEMA.COLUMNS WHERE TABLE_NAME = 'CustomerProfile' AND COLUMN_NAME ='Gender')
ALTER TABLE CustomerProfile ADD Gender VARCHAR(20)


IF NOT EXISTS (SELECT * FROM INFORMATION_SCHEMA.COLUMNS WHERE TABLE_NAME = 'CustomerProfile' AND COLUMN_NAME ='IdentityDocument')
ALTER TABLE CustomerProfile ADD IdentityDocument VARCHAR(50)

IF NOT EXISTS (SELECT * FROM INFORMATION_SCHEMA.COLUMNS WHERE TABLE_NAME = 'CustomerProfile' AND COLUMN_NAME ='DocumentNo')
ALTER TABLE CustomerProfile ADD DocumentNo VARCHAR(50)

IF NOT EXISTS (SELECT * FROM INFORMATION_SCHEMA.COLUMNS WHERE TABLE_NAME = 'setting' and column_name = 'EnablePharmacyModule')
ALTER TABLE SETTING ADD EnablePharmacyModule TINYINT

IF NOT EXISTS (SELECT * FROM INFORMATION_SCHEMA.COLUMNS WHERE TABLE_NAME = 'setting' and column_name = 'EnableHotelModule')
ALTER TABLE SETTING ADD EnableHotelModule TINYINT

IF NOT EXISTS (SELECT * FROM INFORMATION_SCHEMA.COLUMNS WHERE TABLE_NAME = 'setting' and column_name = 'EnableDiscountPreset')
ALTER TABLE SETTING ADD EnableDiscountPreset TINYINT

IF NOT EXISTS (SELECT * FROM INFORMATION_SCHEMA.COLUMNS WHERE TABLE_NAME = 'setting' and column_name = 'PrintKotWithBill')
ALTER TABLE SETTING ADD PrintKotWithBill TINYINT

IF NOT EXISTS (SELECT * FROM INFORMATION_SCHEMA.COLUMNS WHERE TABLE_NAME = 'MENUITEM' and column_name = 'FoodPrepTime')
ALTER TABLE MENUITEM ADD FoodPrepTime INT

IF EXISTS (SELECT * FROM INFORMATION_SCHEMA.COLUMNS WHERE TABLE_NAME = 'TableList' AND COLUMN_NAME = 'TableNo' AND IS_NULLABLE = 'YES')
ALTER TABLE TableList ALTER COLUMN TableNo VARCHAR(50) NOT NULL;

IF NOT EXISTS (SELECT * FROM INFORMATION_SCHEMA.COLUMNS WHERE TABLE_NAME = 'MENUITEM' AND COLUMN_NAME = 'LabeledMRP')
ALTER TABLE MENUITEM ADD LabeledMRP DECIMAL(18,2)

IF NOT EXISTS (SELECT * FROM INFORMATION_SCHEMA.COLUMNS WHERE TABLE_NAME = 'BATCHPRICE_MASTER' AND COLUMN_NAME = 'CostPrice')
ALTER TABLE BATCHPRICE_MASTER ADD CostPrice DECIMAL(20,12)

IF NOT EXISTS (SELECT * FROM INFORMATION_SCHEMA.COLUMNS WHERE TABLE_NAME = 'MULTIALTUNIT' AND COLUMN_NAME = 'STAMP')
ALTER TABLE MULTIALTUNIT ADD STAMP FLOAT

IF NOT EXISTS (SELECT * FROM INFORMATION_SCHEMA.COLUMNS WHERE TABLE_NAME = 'TBL_REQUISITION_DETAILS' AND COLUMN_NAME = 'STATUS')
ALTER TABLE TBL_REQUISITION_DETAILS ADD [STATUS] INT NOT NULL, CONSTRAINT DF_TBL_REQUISITION_DETAILS_STATUS DEFAULT (0) FOR [STATUS] WITH VALUES

IF NOT EXISTS (SELECT * FROM INFORMATION_SCHEMA.COLUMNS WHERE TABLE_NAME = 'TBL_REQUISITION_DETAILS' AND COLUMN_NAME = 'ApprovedDate')
ALTER TABLE TBL_REQUISITION_DETAILS ADD ApprovedDate DATETIME

IF NOT EXISTS (SELECT * FROM INFORMATION_SCHEMA.COLUMNS WHERE TABLE_NAME = 'TBL_REQUISITION_DETAILS' AND COLUMN_NAME = 'ApprovedUser')
ALTER TABLE TBL_REQUISITION_DETAILS ADD ApprovedUser VARCHAR(30)

IF NOT EXISTS (SELECT * FROM INFORMATION_SCHEMA.COLUMNS WHERE TABLE_NAME = 'TBL_REQUISITION_DETAILS' AND COLUMN_NAME = 'PONumber')
ALTER TABLE TBL_REQUISITION_DETAILS ADD PONumber VARCHAR(30)

IF NOT EXISTS (SELECT * FROM INFORMATION_SCHEMA.COLUMNS WHERE TABLE_NAME = 'TBL_REQUISITION_DETAILS' AND COLUMN_NAME = 'PINumber')
ALTER TABLE TBL_REQUISITION_DETAILS ADD PINumber VARCHAR(30)

IF NOT EXISTS (SELECT * FROM INFORMATION_SCHEMA.COLUMNS WHERE TABLE_NAME = 'TBL_REQUISITION_DETAILS' AND COLUMN_NAME = 'IssueNumber')
ALTER TABLE TBL_REQUISITION_DETAILS ADD IssueNumber VARCHAR(30)

IF NOT EXISTS (SELECT * FROM INFORMATION_SCHEMA.COLUMNS WHERE TABLE_NAME = 'TABLELAYOUT' AND COLUMN_NAME = 'TERMINAL')
ALTER TABLE TABLELAYOUT ADD TERMINAL VARCHAR (5)

IF NOT EXISTS (SELECT * FROM INFORMATION_SCHEMA.COLUMNS WHERE TABLE_NAME = 'RMD_TRNPROD_STATUS' AND COLUMN_NAME = 'CONFACTOR')
ALTER TABLE RMD_TRNPROD_STATUS ADD  CONFACTOR  NUMERIC(9,3)

IF NOT EXISTS (SELECT * FROM INFORMATION_SCHEMA.COLUMNS WHERE TABLE_NAME = 'RMD_TRNPROD_STATUS' AND COLUMN_NAME = 'DiscountPresetID')
ALTER TABLE RMD_TRNPROD_STATUS ADD DiscountPresetID INT

IF NOT EXISTS (SELECT * FROM INFORMATION_SCHEMA.COLUMNS WHERE TABLE_NAME = 'RMD_TRNPROD_STATUS' AND COLUMN_NAME = 'REFSNO')
ALTER TABLE RMD_TRNPROD_STATUS ADD REFSNO INT

IF NOT EXISTS (SELECT * FROM INFORMATION_SCHEMA.COLUMNS WHERE TABLE_NAME = 'TBLUSERRIGHTS' AND COLUMN_NAME = 'POST')
ALTER TABLE TBLUSERRIGHTS ADD POST TINYINT

IF NOT EXISTS (SELECT * FROM INFORMATION_SCHEMA.COLUMNS WHERE TABLE_NAME = 'RMD_TRNPROD_STATUS' AND COLUMN_NAME = 'PointRedeemValue')
ALTER TABLE RMD_TRNPROD_STATUS ADD PointRedeemValue NUMERIC(18,12) NOT NULL, CONSTRAINT DF_RMD_TRNPROD_STATUS_PointRedeemValue DEFAULT (0) FOR PointRedeemValue WITH VALUES

IF NOT EXISTS (SELECT * FROM INFORMATION_SCHEMA.COLUMNS WHERE TABLE_NAME = 'LOGSUBTRAN' AND COLUMN_NAME = 'COSTCENTER')
ALTER TABLE LOGSUBTRAN ADD COSTCENTER VARCHAR(100)

IF NOT EXISTS(SELECT * FROM INFORMATION_SCHEMA.COLUMNS WHERE TABLE_NAME = 'RMD_SUBLEDGERTRAN' AND COLUMN_NAME = 'COSTCENTER')
ALTER TABLE RMD_SUBLEDGERTRAN ADD COSTCENTER VARCHAR(100)

IF NOT EXISTS(SELECT * FROM INFORMATION_SCHEMA.COLUMNS WHERE TABLE_NAME = 'LOGSUBTRAN' AND COLUMN_NAME = 'COSTCENTER')
ALTER TABLE LOGSUBTRAN ADD COSTCENTER VARCHAR(100)

IF NOT EXISTS(SELECT * FROM INFORMATION_SCHEMA.COLUMNS WHERE TABLE_NAME = 'LOGMAIN_ORDER' AND COLUMN_NAME = 'REFNO')
ALTER TABLE LOGMAIN_ORDER ADD REFNO VARCHAR(25)

IF NOT EXISTS(SELECT * FROM INFORMATION_SCHEMA.COLUMNS WHERE TABLE_NAME = 'LOGMAIN_ORDER' AND COLUMN_NAME = 'GUID')
ALTER TABLE LOGMAIN_ORDER ADD GUID VARCHAR(50)

IF NOT EXISTS(SELECT * FROM INFORMATION_SCHEMA.COLUMNS WHERE TABLE_NAME = 'LOGMAIN_ORDER' AND COLUMN_NAME = 'EID')
ALTER TABLE LOGMAIN_ORDER ALTER COLUMN EID INT

IF NOT EXISTS(SELECT * FROM INFORMATION_SCHEMA.COLUMNS WHERE TABLE_NAME = 'RMD_ORDERMAIN' AND COLUMN_NAME = 'EXPDATE')
ALTER TABLE RMD_ORDERMAIN ADD EXPDATE DATETIME

IF NOT EXISTS(SELECT * FROM INFORMATION_SCHEMA.COLUMNS WHERE TABLE_NAME = 'LOGMAIN_ORDER' AND COLUMN_NAME = 'EXPDATE')
ALTER TABLE LOGMAIN_ORDER ADD EXPDATE DATETIME

IF NOT EXISTS (SELECT * FROM INFORMATION_SCHEMA.COLUMNS WHERE TABLE_NAME = 'MENUITEM' AND COLUMN_NAME LIKE 'RECWRATE')
ALTER TABLE MENUITEM ADD RECWRATE NUMERIC(5,2)

IF NOT EXISTS (SELECT * FROM INFORMATION_SCHEMA.COLUMNS WHERE TABLE_NAME = 'TMPRMD_TRNTRAN' AND COLUMN_NAME = 'SNO')
ALTER TABLE TMPRMD_TRNTRAN ADD SNO INT NOT NULL

IF NOT EXISTS (SELECT * FROM INFORMATION_SCHEMA.COLUMNS WHERE TABLE_NAME = 'TMPRMD_TRNTRAN' AND COLUMN_NAME = 'STAMP')
ALTER TABLE TMPRMD_TRNTRAN ADD STAMP FLOAT NOT NULL

IF EXISTS(SELECT * FROM INFORMATION_SCHEMA.COLUMNS WHERE TABLE_NAME = 'COMPANY' AND COLUMN_NAME = 'ROW_VERSION' AND DATA_TYPE = 'varbinary')
BEGIN
ALTER TABLE COMPANY DROP COLUMN ROW_VERSION
ALTER TABLE COMPANY ADD ROW_VERSION ROWVERSION
END

IF NOT EXISTS (SELECT * FROM INFORMATION_SCHEMA.COLUMNS WHERE TABLE_NAME = '_LOG_BARCODE' AND COLUMN_NAME = 'SN' AND IS_NULLABLE = 'YES')
ALTER TABLE _LOG_BARCODE ALTER COLUMN SN NUMERIC(18,0) NULL



