IF NOT EXISTS (SELECT * FROM INFORMATION_SCHEMA.COLUMNS WHERE TABLE_NAME = 'SETTING' AND COLUMN_NAME = 'AppBuildNo')
ALTER TABLE SETTING ADD AppBuildNo VARCHAR(500) 

IF NOT EXISTS(SELECT * FROM INFORMATION_SCHEMA.COLUMNS WHERE TABLE_NAME = 'RMD_BILLTENDER' AND COLUMN_NAME = 'SALESMANID')
ALTER TABLE RMD_BILLTENDER ADD SALESMANID INT

IF NOT EXISTS (SELECT * FROM INFORMATION_SCHEMA.TABLE_CONSTRAINTS WHERE CONSTRAINT_NAME = 'FK_MENUITEM_SUPCODE')
BEGIN
	UPDATE A SET SUPCODE = NULL FROM MENUITEM A LEFT JOIN RMD_ACLIST B ON A.SUPCODE = B.ACID
	WHERE B.ACID IS NULL
	ALTER TABLE MENUITEM ADD CONSTRAINT FK_MENUITEM_SUPCODE FOREIGN KEY (SUPCODE) REFERENCES RMD_ACLIST(ACID)
END

IF EXISTS(SELECT * FROM INFORMATION_SCHEMA.TABLE_CONSTRAINTS WHERE CONSTRAINT_NAME = 'FK_RCF_ReportMaster')
ALTER TABLE ReportColumnFormat DROP CONSTRAINT FK_RCF_ReportMaster

IF NOT EXISTS (SELECT * FROM INFORMATION_SCHEMA.COLUMNS WHERE TABLE_NAME = 'RMD_TRNPROD_STATUS' AND COLUMN_NAME = 'SalesMan')
ALTER TABLE RMD_TRNPROD_STATUS ADD SalesMan VARCHAR(200) NOT NULL, CONSTRAINT DF_RMD_TRNPROD_STATUS_SALESMAN DEFAULT ('') FOR SalesMan

IF NOT EXISTS (SELECT * FROM INFORMATION_SCHEMA.COLUMNS WHERE TABLE_NAME = 'SETTING' AND COLUMN_NAME = 'AllowMultiSalesManTag')
ALTER TABLE SETTING ADD AllowMultiSalesManTag TINYINT


IF NOT EXISTS (SELECT * FROM INFORMATION_SCHEMA.COLUMNS WHERE TABLE_NAME = 'SETTING' AND COLUMN_NAME = 'EnableIndItemSalesManTag')
ALTER TABLE SETTING ADD EnableIndItemSalesManTag TINYINT

IF NOT EXISTS (SELECT * FROM INFORMATION_SCHEMA.COLUMNS WHERE TABLE_NAME = 'CustomerProfile' AND COLUMN_NAME = 'EMAIL')
ALTER TABLE CustomerProfile ADD EMAIL VARCHAR(200)

IF NOT EXISTS (SELECT * FROM INFORMATION_SCHEMA.COLUMNS WHERE TABLE_NAME = 'RMD_TRNPROD_STATUS' AND COLUMN_NAME = 'StartTime')
ALTER TABLE RMD_TRNPROD_STATUS ADD StartTime VARCHAR(10)
IF NOT EXISTS (SELECT * FROM INFORMATION_SCHEMA.COLUMNS WHERE TABLE_NAME = 'RMD_TRNPROD_STATUS' AND COLUMN_NAME = 'EndTime')
ALTER TABLE RMD_TRNPROD_STATUS ADD EndTime VARCHAR(10)
IF NOT EXISTS (SELECT * FROM INFORMATION_SCHEMA.COLUMNS WHERE TABLE_NAME = 'RMD_TRNPROD_STATUS' AND COLUMN_NAME = 'SNO')
ALTER TABLE RMD_TRNPROD_STATUS ADD SNO INT

IF NOT EXISTS (SELECT * FROM INFORMATION_SCHEMA.COLUMNS WHERE TABLE_NAME = 'SETTING' AND COLUMN_NAME = 'AllowMultiWarehouseInTransaction')
ALTER TABLE SETTING ADD AllowMultiWarehouseInTransaction TINYINT

IF NOT EXISTS (SELECT * FROM INFORMATION_SCHEMA.COLUMNS WHERE TABLE_NAME = 'SETTING' AND COLUMN_NAME = 'BackendOnlineBilling')
ALTER TABLE SETTING ADD BackendOnlineBilling TINYINT

IF NOT EXISTS (SELECT * FROM INFORMATION_SCHEMA.COLUMNS WHERE TABLE_NAME = 'SETTING' AND COLUMN_NAME = 'EnableDiscountPreset')
ALTER TABLE SETTING ADD EnableDiscountPreset TINYINT


IF NOT EXISTS (SELECT * FROM INFORMATION_SCHEMA.COLUMNS WHERE TABLE_NAME = 'RMD_ORDERMAIN' AND COLUMN_NAME = 'REFNO')
ALTER TABLE RMD_ORDERMAIN ADD REFNO VARCHAR(25)

IF NOT EXISTS (SELECT * FROM INFORMATION_SCHEMA.COLUMNS WHERE TABLE_NAME = 'RMD_ORDERMAIN' AND COLUMN_NAME = 'GUID')
ALTER TABLE RMD_ORDERMAIN ADD GUID VARCHAR(50)

IF NOT EXISTS (SELECT * FROM INFORMATION_SCHEMA.COLUMNS WHERE TABLE_NAME = '_LOG_BARCODE' AND COLUMN_NAME = 'SN' AND IS_NULLABLE = 'YES')
ALTER TABLE _LOG_BARCODE ALTER COLUMN SN NUMERIC(18,0) NULL


