IF NOT EXISTS (SELECT * FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_NAME = 'CONTRACTPRICEMASTER')
CREATE TABLE [dbo].[CONTRACTPRICEMASTER](
	[CMID] [int] NOT NULL PRIMARY KEY,
	[CUSTID] [varchar](25) NULL,
	[PRICENAME] [varchar](250) NOT NULL,
	[CUSTNAME] [varchar](250) NULL,
	[STARTDATE] [date] NOT NULL,
	[ENDDATE] [date] NOT NULL,
	[DISCOUNTTYPE] [varchar](10) NULL,
	[STATUS] [tinyint] NOT NULL DEFAULT (1),
	[ISAPPROVED] [tinyint] NOT NULL DEFAULT (1),
	[CONTRACTPRICETYPE] [varchar](20) NULL,
	[STAMP] [float] NOT NULL DEFAULT(CONVERT(FLOAT,GETDATE()))
)

IF NOT EXISTS (SELECT * FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_NAME = 'CONTRACTPRICE')
CREATE TABLE [dbo].[CONTRACTPRICE](
	[CID] [int] IDENTITY(1,1) NOT NULL PRIMARY KEY,
	[CMID] [int] NOT NULL,
	[CUSTID] [varchar](25) NULL,
	[ITEMCODE] [varchar](25) NOT NULL,
	[ITEMNAME] [varchar](150) NOT NULL,
	[DISCOUNT] [numeric](10, 2) NOT NULL DEFAULT(0),
	[FLATRATEDISCOUNT] [numeric](18, 3) NOT NULL DEFAULT(0),
	[ISACTIVE] [tinyint] NOT NULL DEFAULT(1),
	[DISCOUNTTYPE] [varchar](10) NULL,
	[STAMP] [float] NOT NULL DEFAULT(CONVERT(FLOAT,GETDATE())),
	CONSTRAINT FK_CONTRACTPRICE_MASTER FOREIGN KEY (CMID) REFERENCES CONTRACTPRICEMASTER(CMID),
	CONSTRAINT FK_CONTRACTPRICE_MENUITEM FOREIGN KEY (ITEMCODE) REFERENCES MENUITEM(MCODE) ON DELETE CASCADE
) 

IF NOT EXISTS (SELECT * FROM INFORMATION_SCHEMA.COLUMNS WHERE TABLE_NAME = 'RMD_ACLIST' AND COLUMN_NAME = 'ContractPriceId')
ALTER TABLE RMD_ACLIST ADD ContractPriceId INT NULL


