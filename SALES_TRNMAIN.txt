CREATE OR ALTER VIEW [dbo].[SALES_TRNMAIN] 
AS
SELECT DISTINCT VCHRNO, DIVISION, CHALANNO, TRNDATE, BSDATE, TRNTIME, TOTAMNT, DCAMNT, DCRATE, VATAMNT, NETAMNT, ADVANCE, TRNMODE, BILLTO, BILLTOADD, TRNUSER, VATBILL, DELIVERYDATE, DELIVERYTIME, ORDERS, 
				REFORDBILL, INDDIS, CREBATE, CREDIT, DUEDATE, TRNAC, PARAC, PARTRNAMNT, RETTO, REFBILL, CHEQUENO, CHEQUEDATE, REMARKS, POST, POSTUSER, FPOSTUSER, TERMINAL, SHIFT, EXPORT, CHOLDER, 
                         CARDNO, EditUser, MEMBERNO, MEMBERNAME, EDITED, TAXABLE, NONTAXABLE, VMODE, BILLTOTEL, BILLTOMOB, TRN_DATE, BS_DATE, STAX, TOTALCASH, TOTALCREDIT, TOTALCREDITCARD, TOTALGIFTVOUCHER, 
                         TENDER, CHANGE, CardTranID, ReturnVchrID, TranID, VoucherStatus, VoucherType, PRESCRIBEBY, DISPENSEBY, RECEIVEBY, Edate, STATUS, CONFIRMEDBY, CONFIRMEDTIME, PhiscalID, Stamp, ROUNDOFF, 
                         Customer_Count, DBUSER, HOSTID, VNUM, TOTALREBATE, DISVALUE, STAXVALUE, COSTCENTER, TOTALFLATDISCOUNT, TOTALINDDISCOUNT, TOTALLOYALTY, TOTALPROMOTION, NETWITHOUTROUNDOFF, guid, JOBNO, 
                         MWAREHOUSE, POSTID
FROM            (
								SELECT        VCHRNO, DIVISION, CHALANNO, TRNDATE, BSDATE, TRNTIME, TOTAMNT, DCAMNT, DCRATE, VATAMNT, NETAMNT, ADVANCE, TRNMODE, BILLTO, BILLTOADD, TRNUSER, VATBILL, DELIVERYDATE, 
                                                    DELIVERYTIME, ORDERS, REFORDBILL, INDDIS, CREBATE, CREDIT, DUEDATE, TRNAC, PARAC, PARTRNAMNT, RETTO, REFBILL, CHEQUENO, CHEQUEDATE, REMARKS, POST, POSTUSER, FPOSTUSER, 
                                                    TERMINAL, SHIFT, EXPORT, CHOLDER, CARDNO, EditUser, MEMBERNO, MEMBERNAME, EDITED, TAXABLE, NONTAXABLE, VMODE, BILLTOTEL, BILLTOMOB, TRN_DATE, BS_DATE, STAX, TOTALCASH, 
                                                    TOTALCREDIT, TOTALCREDITCARD, TOTALGIFTVOUCHER, TENDER, CHANGE, CardTranID, ReturnVchrID, TranID, VoucherStatus, VoucherType, PRESCRIBEBY, DISPENSEBY, RECEIVEBY, Edate, STATUS, 
                                                    CONFIRMEDBY, CONFIRMEDTIME, PhiscalID, Stamp, ROUNDOFF, Customer_Count, DBUSER, HOSTID, VNUM, TOTALREBATE, DISVALUE, STAXVALUE, COSTCENTER, TOTALFLATDISCOUNT, TOTALINDDISCOUNT, 
                                                    TOTALLOYALTY, TOTALPROMOTION, NETWITHOUTROUNDOFF, guid, JOBNO, MWAREHOUSE, POSTID

								FROM            dbo.ABBMAIN      WHERE EXISTS(SELECT  SumAbbreviatedSales FROM   dbo.SETTING WHERE SumAbbreviatedSales=0)
								UNION ALL
							    SELECT        VCHRNO, DIVISION, CHALANNO, TRNDATE, BSDATE, TRNTIME, TOTAMNT, DCAMNT, DCRATE, VATAMNT, NETAMNT, ADVANCE, TRNMODE, BILLTO, BILLTOADD, TRNUSER, VATBILL, DELIVERYDATE, 
														   DELIVERYTIME, ORDERS, REFORDBILL, INDDIS, CREBATE, CREDIT, DUEDATE, TRNAC, PARAC, PARTRNAMNT, RETTO, REFBILL, CHEQUENO, CHEQUEDATE, REMARKS, POST, POSTUSER, FPOSTUSER, 
														   TERMINAL, SHIFT, EXPORT, CHOLDER, CARDNO, EditUser, MEMBERNO, MEMBERNAME, EDITED, TAXABLE, NONTAXABLE, VMODE, BILLTOTEL, BILLTOMOB, TRN_DATE, BS_DATE, STAX, TOTALCASH, 
														   TOTALCREDIT, TOTALCREDITCARD, TOTALGIFTVOUCHER, TENDER, CHANGE, CardTranID, ReturnVchrID, TranID, VoucherStatus, VoucherType, PRESCRIBEBY, DISPENSEBY, RECEIVEBY, Edate, STATUS, 
														   CONFIRMEDBY, CONFIRMEDTIME, PhiscalID, Stamp, ROUNDOFF, Customer_Count, DBUSER, HOSTID, VNUM, TOTALREBATE, DISVALUE, STAXVALUE, COSTCENTER, TOTALFLATDISCOUNT, TOTALINDDISCOUNT, 
														   TOTALLOYALTY, TOTALPROMOTION, NETWITHOUTROUNDOFF, guid, JOBNO, MWAREHOUSE, POSTID
								 FROM            dbo.SUMMAIN  WHERE EXISTS(SELECT  SumAbbreviatedSales FROM   dbo.SETTING WHERE SumAbbreviatedSales=1)
						 
						  UNION ALL
                          SELECT        VCHRNO, DIVISION, CHALANNO, TRNDATE, BSDATE, TRNTIME, TOTAMNT, DCAMNT, DCRATE, VATAMNT, NETAMNT, ADVANCE, TRNMODE, BILLTO, BILLTOADD, TRNUSER, VATBILL, DELIVERYDATE, 
                                                    DELIVERYTIME, ORDERS, REFORDBILL, INDDIS, CREBATE, CREDIT, DUEDATE, TRNAC, PARAC, PARTRNAMNT, RETTO, REFBILL, CHEQUENO, CHEQUEDATE, REMARKS, POST, POSTUSER, FPOSTUSER, 
                                                    TERMINAL, SHIFT, EXPORT, CHOLDER, CARDNO, EditUser, MEMBERNO, MEMBERNAME, EDITED, TAXABLE, NONTAXABLE, VMODE, BILLTOTEL, BILLTOMOB, TRN_DATE, BS_DATE, STAX, TOTALCASH, 
                                                    TOTALCREDIT, TOTALCREDITCARD, TOTALGIFTVOUCHER, TENDER, CHANGE, CardTranID, ReturnVchrID, TranID, VoucherStatus, VoucherType, PRESCRIBEBY, DISPENSEBY, RECEIVEBY, Edate, STATUS, 
                                                    CONFIRMEDBY, CONFIRMEDTIME, PhiscalID, Stamp, ROUNDOFF, Customer_Count, DBUSER, HOSTID, VNUM, TOTALREBATE, DISVALUE, STAXVALUE, COSTCENTER, TOTALFLATDISCOUNT, TOTALINDDISCOUNT, 
                                                    TOTALLOYALTY, TOTALPROMOTION, NETWITHOUTROUNDOFF, guid, JOBNO, MWAREHOUSE, POSTID

								FROM            dbo.TRNMAIN   
                          
						  ) AS A

