
IF NOT EXISTS(SELECT * FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_NAME = 'Discount_SchemeDiscount')
CREATE TABLE [dbo].[Discount_SchemeDiscount](
	[DisID] [int] NOT NULL,
	[MGroup] [varchar](25) NULL,
	[Parent] [varchar](25) NULL,
	[Mcode] [varchar](25) NULL,
	[DisRate] [decimal](18, 2) NULL,
	[DisAmount] [decimal](25, 16) NULL,
	[VAT] [tinyint] NULL,
	[STAMP] [float] NULL
) ON [PRIMARY]

IF NOT EXISTS(SELECT * FROM INFORMATION_SCHEMA.COLUMNS WHERE TABLE_NAME = 'DISCOUNT_RATE' AND COLUMN_NAME = 'DisAmount' AND NUMERIC_PRECISION = 25 AND NUMERIC_SCALE = 16)
ALTER TABLE DISCOUNT_RATE ALTER COLUMN DisAmount decimal(25,16)

IF NOT EXISTS(SELECT * FROM INFORMATION_SCHEMA.COLUMNS WHERE TABLE_NAME = 'DISCOUNT_RATE' AND COLUMN_NAME = 'MCategory')
ALTER TABLE DISCOUNT_RATE ADD MCategory VARCHAR(50)

IF NOT EXISTS (SELECT * FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_NAME = 'ActionRemarks')
CREATE TABLE ActionRemarks (ActionKey varchar(50) NOT NULL, DefaultRemarks varchar(250) NOT NULL) 

IF NOT EXISTS (SELECT * FROM INFORMATION_SCHEMA.COLUMNS WHERE TABLE_NAME = 'VoucherRemark' AND COLUMN_NAME = 'VCHRNO' AND CHARACTER_MAXIMUM_LENGTH = 25)
ALTER TABLE VoucherRemark ALTER COLUMN VCHRNO VARCHAR(25) NULL

IF NOT EXISTS (SELECT * FROM INFORMATION_SCHEMA.COLUMNS WHERE TABLE_NAME = 'VoucherRemark' AND COLUMN_NAME = 'BillAmount')
BEGIN
IF EXISTS (SELECT * FROM INFORMATION_SCHEMA.TABLE_CONSTRAINTS WHERE TABLE_NAME = 'VoucherRemark' AND CONSTRAINT_NAME = 'UniqueId')
ALTER TABLE VoucherRemark DROP CONSTRAINT UniqueId
ALTER TABLE VoucherRemark ADD BillAmount decimal(25, 16) NOT NULL, CONSTRAINT DF_VoucherRamark_BillAmount DEFAULT (0) FOR BillAmount
ALTER TABLE [dbo].[VoucherRemark] ADD  CONSTRAINT [UniqueId] UNIQUE NONCLUSTERED 
(
	[Vchrno] ASC,
	[Division] ASC,
	[PhiscalId] ASC
)WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, SORT_IN_TEMPDB = OFF, IGNORE_DUP_KEY = OFF, ONLINE = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON) ON [PRIMARY]
END

IF NOT EXISTS (SELECT * FROM INFORMATION_SCHEMA.COLUMNS WHERE TABLE_NAME = 'VoucherRemark' AND COLUMN_NAME = 'GiftVoucherName')
ALTER TABLE VoucherRemark ADD GiftVoucherName VARCHAR(250)

IF NOT EXISTS (SELECT * FROM INFORMATION_SCHEMA.COLUMNS WHERE TABLE_NAME = 'VoucherRemark' AND COLUMN_NAME = 'GiftRemark')
ALTER TABLE VoucherRemark ADD GiftRemark VARCHAR(1000)


ALTER TABLE Discount_SchemeDiscount ALTER COLUMN DisAmount DECIMAL(25,16) NOT NULL
ALTER TABLE Discount_SchemeDiscount ALTER COLUMN DisRate DECIMAL(5,2) NOT NULL

ALTER TABLE Discount_IfAnyItemsList ALTER COLUMN DisAmount DECIMAL(25,16) NOT NULL
ALTER TABLE Discount_IfAnyItemsList ALTER COLUMN DisRate DECIMAL(5,2) NOT NULL
ALTER TABLE Discount_IfAnyItemsList ALTER COLUMN GreaterThan DECIMAL(25,16)
ALTER TABLE Discount_IfAnyItemsList ALTER COLUMN LessThan DECIMAL(25,16) 

ALTER TABLE Discount_Rate ALTER COLUMN DisAmount DECIMAL(25,16) NOT NULL
ALTER TABLE Discount_Rate ALTER COLUMN DisRate DECIMAL(5,2) NOT NULL
ALTER TABLE Discount_Rate ALTER COLUMN GreaterThan DECIMAL(25,16)
ALTER TABLE Discount_Rate ALTER COLUMN LessThan DECIMAL(25,16) 






