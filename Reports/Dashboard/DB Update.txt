ALTER TABLE SETTING ADD ShowDashboardInNet BIT 
UPDATE SETTING SET ShowDashboardInNet = 0

GO

IF NOT EXISTS (SELECT * FROM INFORMATION_SCHEMA.COLUMNS WHERE TABLE_NAME = 'COMPANY' AND COLUMN_NAME = 'COMPANYID')
ALTER TABLE COMPANY ADD COMPANYID VARCHAR(10)

UPDATE COMPANY SET COMPANYID = 'GS001'
GO

CREATE OR ALTER Function [dbo].[GetCompanyID]() returns varchar(20)
as
Begin
	Declare @CompanyID varchar(20)
	select @CompanyID=COMPANYID from COMPANY 
	return (@COMPANYID)
End

IF NOT EXISTS (SELECT * FROM INFORMATION_SCHEMA.COLUMNS WHERE TABLE_NAME = 'ABBMAIN' AND COLUMN_NAME = 'COMPANYID')
ALTER TABLE ABBMAIN ADD COMPANYID VARCHAR(10) NOT NULL, CONSTRAINT DF_ABBMAIN_COMPANYID DEFAULT (DBO.GETCOMPANYID()) FOR COMPANYID WITH VALUES
ALTER TABLE ABBPROD ADD COMPANYID VARCHAR(10) NOT NULL, CONSTRAINT DF_ABBPROD_COMPANYID DEFAULT (DBO.GETCOMPANYID()) FOR COMPANYID WITH VALUES
ALTER TABLE ABBTRAN ADD COMPANYID VARCHAR(10) NOT NULL, CONSTRAINT DF_ABBTRAN_COMPANYID DEFAULT (DBO.GETCOMPANYID()) FOR COMPANYID WITH VALUES

ALTER TABLE TRNMAIN ADD COMPANYID VARCHAR(10) NOT NULL, CONSTRAINT DF_TRNMAIN_COMPANYID DEFAULT (DBO.GETCOMPANYID()) FOR COMPANYID WITH VALUES
ALTER TABLE TRNPROD ADD COMPANYID VARCHAR(10) NOT NULL, CONSTRAINT DF_TRNPROD_COMPANYID DEFAULT (DBO.GETCOMPANYID()) FOR COMPANYID WITH VALUES
ALTER TABLE TRNTRAN ADD COMPANYID VARCHAR(10) NOT NULL, CONSTRAINT DF_TRNTRAN_COMPANYID DEFAULT (DBO.GETCOMPANYID()) FOR COMPANYID WITH VALUES

ALTER TABLE PURMAIN ADD COMPANYID VARCHAR(10) NOT NULL, CONSTRAINT DF_PURMAIN_COMPANYID DEFAULT (DBO.GETCOMPANYID()) FOR COMPANYID WITH VALUES
ALTER TABLE PURPROD ADD COMPANYID VARCHAR(10) NOT NULL, CONSTRAINT DF_PURPROD_COMPANYID DEFAULT (DBO.GETCOMPANYID()) FOR COMPANYID WITH VALUES
ALTER TABLE PURTRAN ADD COMPANYID VARCHAR(10) NOT NULL, CONSTRAINT DF_PURTRAN_COMPANYID DEFAULT (DBO.GETCOMPANYID()) FOR COMPANYID WITH VALUES

ALTER TABLE INVMAIN ADD COMPANYID VARCHAR(10) NOT NULL, CONSTRAINT DF_INVMAIN_COMPANYID DEFAULT (DBO.GETCOMPANYID()) FOR COMPANYID WITH VALUES
ALTER TABLE INVPROD ADD COMPANYID VARCHAR(10) NOT NULL, CONSTRAINT DF_INVPROD_COMPANYID DEFAULT (DBO.GETCOMPANYID()) FOR COMPANYID WITH VALUES
ALTER TABLE INVTRAN ADD COMPANYID VARCHAR(10) NOT NULL, CONSTRAINT DF_INVTRAN_COMPANYID DEFAULT (DBO.GETCOMPANYID()) FOR COMPANYID WITH VALUES

ALTER TABLE OPMAIN ADD COMPANYID VARCHAR(10) NOT NULL, CONSTRAINT DF_OPMAIN_COMPANYID DEFAULT (DBO.GETCOMPANYID()) FOR COMPANYID WITH VALUES
ALTER TABLE OPPROD ADD COMPANYID VARCHAR(10) NOT NULL, CONSTRAINT DF_OPPROD_COMPANYID DEFAULT (DBO.GETCOMPANYID()) FOR COMPANYID WITH VALUES
ALTER TABLE OPTRAN ADD COMPANYID VARCHAR(10) NOT NULL, CONSTRAINT DF_OPTRAN_COMPANYID DEFAULT (DBO.GETCOMPANYID()) FOR COMPANYID WITH VALUES

ALTER TABLE ACCMAIN ADD COMPANYID VARCHAR(10) NOT NULL, CONSTRAINT DF_ACCMAIN_COMPANYID DEFAULT (DBO.GETCOMPANYID()) FOR COMPANYID WITH VALUES
ALTER TABLE ACCPROD ADD COMPANYID VARCHAR(10) NOT NULL, CONSTRAINT DF_ACCPROD_COMPANYID DEFAULT (DBO.GETCOMPANYID()) FOR COMPANYID WITH VALUES
ALTER TABLE ACCTRAN ADD COMPANYID VARCHAR(10) NOT NULL, CONSTRAINT DF_ACCTRAN_COMPANYID DEFAULT (DBO.GETCOMPANYID()) FOR COMPANYID WITH VALUES

ALTER TABLE AOPMAIN ADD COMPANYID VARCHAR(10) NOT NULL, CONSTRAINT DF_AOPMAIN_COMPANYID DEFAULT (DBO.GETCOMPANYID()) FOR COMPANYID WITH VALUES
ALTER TABLE AOPPROD ADD COMPANYID VARCHAR(10) NOT NULL, CONSTRAINT DF_AOPPROD_COMPANYID DEFAULT (DBO.GETCOMPANYID()) FOR COMPANYID WITH VALUES
ALTER TABLE AOPTRAN ADD COMPANYID VARCHAR(10) NOT NULL, CONSTRAINT DF_AOPTRAN_COMPANYID DEFAULT (DBO.GETCOMPANYID()) FOR COMPANYID WITH VALUES
